{% extends "layout.html" %}

{% block head %}
  {{ super() }}
  {{ content.head | safe }}
{% endblock %}

{% block header %}
  <div id="meta-container">
    {# 
    TODO:
    - difficulty? nah
    - Level Select
      - Button menu?
      - Tabs?
    - Language Select
      - Dropdown menu? -> probably
      - Button menu?
    #}
    <!-- Language Selection -->
    <div id="language-container">
      <button class="dropbtn">🌐 Language: {{ current_language }}</button>
      <div class="language-dropdown">
        {% for lang, val in supported_languages.items() %}
          <a
            {% if github_pages %}
              href="{{ request.path.split('/lang/')[0] }}{{ '/lang/' + lang if lang else '' }}"
            {% else %}
              onclick="document.cookie = 'lang={{ lang }}'; location.reload();"
            {% endif %}
          >
            {{ val.name }}
          </a>
        {% endfor %}
      </div>
    </div>

    <!-- Level Selection Menu -->
    <nav id="level-container">
      {% for link, assignment in meta.get(AssignmentTemplate.LEVELS_DATA.name).data.items() %}
        {% if assignment.level | int == level | int %}
          <!-- Current Level (Non-clickable) -->
          <div class="level-button active-level-button">
            <span class="assignment-level"> Level {{ assignment.level }} </span>
            <!-- Tooltip -->
            <div class="nav-tooltip">{{ assignment.meta.title }}</div>
          </div>
        {% else %}
          <!-- Other Levels (Clickable) -->
          <div class="level-button">
            <a href="{{ link }}" class="assignment-level">
              Level {{ assignment.level }}
            </a>
            <!-- Tooltip -->
            <div class="nav-tooltip">{{ assignment.meta.title }}</div>
          </div>
        {% endif %}
      {% endfor %}
    </nav>
  </div>
{% endblock %}

{% block base %}
  <h1 class="text-4xl font-semibold assignment-heading">
    {{ content.heading }}
  </h1>
  {{ content.body | safe }}
{% endblock %}
